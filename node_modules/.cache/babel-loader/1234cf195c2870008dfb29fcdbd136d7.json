{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = createValidation;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _mapValues = _interopRequireDefault(require(\"lodash/mapValues\"));\n\nvar _ValidationError = _interopRequireDefault(require(\"../ValidationError\"));\n\nvar _Reference = _interopRequireDefault(require(\"../Reference\"));\n\nvar _synchronousPromise = require(\"synchronous-promise\");\n\nvar formatError = _ValidationError.default.formatError;\n\nvar thenable = function thenable(p) {\n  return p && typeof p.then === 'function' && typeof p.catch === 'function';\n};\n\nfunction runTest(testFn, ctx, value, sync) {\n  var result = testFn.call(ctx, value);\n  if (!sync) return Promise.resolve(result);\n\n  if (thenable(result)) {\n    throw new Error(\"Validation test of type: \\\"\" + ctx.type + \"\\\" returned a Promise during a synchronous validate. \" + \"This test will finish after the validate call has returned\");\n  }\n\n  return _synchronousPromise.SynchronousPromise.resolve(result);\n}\n\nfunction resolveParams(oldParams, newParams, resolve) {\n  return (0, _mapValues.default)((0, _extends2.default)({}, oldParams, newParams), resolve);\n}\n\nfunction createErrorFactory(_ref) {\n  var value = _ref.value,\n      label = _ref.label,\n      resolve = _ref.resolve,\n      originalValue = _ref.originalValue,\n      opts = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"value\", \"label\", \"resolve\", \"originalValue\"]);\n  return function createError(_temp) {\n    var _ref2 = _temp === void 0 ? {} : _temp,\n        _ref2$path = _ref2.path,\n        path = _ref2$path === void 0 ? opts.path : _ref2$path,\n        _ref2$message = _ref2.message,\n        message = _ref2$message === void 0 ? opts.message : _ref2$message,\n        _ref2$type = _ref2.type,\n        type = _ref2$type === void 0 ? opts.name : _ref2$type,\n        params = _ref2.params;\n\n    params = (0, _extends2.default)({\n      path: path,\n      value: value,\n      originalValue: originalValue,\n      label: label\n    }, resolveParams(opts.params, params, resolve));\n    return (0, _extends2.default)(new _ValidationError.default(formatError(message, params), value, path, type), {\n      params: params\n    });\n  };\n}\n\nfunction createValidation(options) {\n  var name = options.name,\n      message = options.message,\n      test = options.test,\n      params = options.params;\n\n  function validate(_ref3) {\n    var value = _ref3.value,\n        path = _ref3.path,\n        label = _ref3.label,\n        options = _ref3.options,\n        originalValue = _ref3.originalValue,\n        sync = _ref3.sync,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(_ref3, [\"value\", \"path\", \"label\", \"options\", \"originalValue\", \"sync\"]);\n    var parent = options.parent;\n\n    var resolve = function resolve(value) {\n      return _Reference.default.isRef(value) ? value.getValue(parent, options.context) : value;\n    };\n\n    var createError = createErrorFactory({\n      message: message,\n      path: path,\n      value: value,\n      originalValue: originalValue,\n      params: params,\n      label: label,\n      resolve: resolve,\n      name: name\n    });\n    var ctx = (0, _extends2.default)({\n      path: path,\n      parent: parent,\n      type: name,\n      createError: createError,\n      resolve: resolve,\n      options: options\n    }, rest);\n    return runTest(test, ctx, value, sync).then(function (validOrError) {\n      if (_ValidationError.default.isError(validOrError)) throw validOrError;else if (!validOrError) throw createError();\n    });\n  }\n\n  validate.TEST_NAME = name;\n  validate.TEST_FN = test;\n  validate.TEST = options;\n  return validate;\n}\n\nmodule.exports.createErrorFactory = createErrorFactory;\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["/home/tim/Documents/BasicReact/test/node_modules/yup/lib/util/createValidation.js"],"names":["_interopRequireDefault","require","exports","__esModule","default","createValidation","_objectWithoutPropertiesLoose2","_extends2","_mapValues","_ValidationError","_Reference","_synchronousPromise","formatError","thenable","p","then","catch","runTest","testFn","ctx","value","sync","result","call","Promise","resolve","Error","type","SynchronousPromise","resolveParams","oldParams","newParams","createErrorFactory","_ref","label","originalValue","opts","createError","_temp","_ref2","_ref2$path","path","_ref2$message","message","_ref2$type","name","params","options","test","validate","_ref3","rest","parent","isRef","getValue","context","validOrError","isError","TEST_NAME","TEST_FN","TEST","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = createValidation;\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _mapValues = _interopRequireDefault(require(\"lodash/mapValues\"));\n\nvar _ValidationError = _interopRequireDefault(require(\"../ValidationError\"));\n\nvar _Reference = _interopRequireDefault(require(\"../Reference\"));\n\nvar _synchronousPromise = require(\"synchronous-promise\");\n\nvar formatError = _ValidationError.default.formatError;\n\nvar thenable = function thenable(p) {\n  return p && typeof p.then === 'function' && typeof p.catch === 'function';\n};\n\nfunction runTest(testFn, ctx, value, sync) {\n  var result = testFn.call(ctx, value);\n  if (!sync) return Promise.resolve(result);\n\n  if (thenable(result)) {\n    throw new Error(\"Validation test of type: \\\"\" + ctx.type + \"\\\" returned a Promise during a synchronous validate. \" + \"This test will finish after the validate call has returned\");\n  }\n\n  return _synchronousPromise.SynchronousPromise.resolve(result);\n}\n\nfunction resolveParams(oldParams, newParams, resolve) {\n  return (0, _mapValues.default)((0, _extends2.default)({}, oldParams, newParams), resolve);\n}\n\nfunction createErrorFactory(_ref) {\n  var value = _ref.value,\n      label = _ref.label,\n      resolve = _ref.resolve,\n      originalValue = _ref.originalValue,\n      opts = (0, _objectWithoutPropertiesLoose2.default)(_ref, [\"value\", \"label\", \"resolve\", \"originalValue\"]);\n  return function createError(_temp) {\n    var _ref2 = _temp === void 0 ? {} : _temp,\n        _ref2$path = _ref2.path,\n        path = _ref2$path === void 0 ? opts.path : _ref2$path,\n        _ref2$message = _ref2.message,\n        message = _ref2$message === void 0 ? opts.message : _ref2$message,\n        _ref2$type = _ref2.type,\n        type = _ref2$type === void 0 ? opts.name : _ref2$type,\n        params = _ref2.params;\n\n    params = (0, _extends2.default)({\n      path: path,\n      value: value,\n      originalValue: originalValue,\n      label: label\n    }, resolveParams(opts.params, params, resolve));\n    return (0, _extends2.default)(new _ValidationError.default(formatError(message, params), value, path, type), {\n      params: params\n    });\n  };\n}\n\nfunction createValidation(options) {\n  var name = options.name,\n      message = options.message,\n      test = options.test,\n      params = options.params;\n\n  function validate(_ref3) {\n    var value = _ref3.value,\n        path = _ref3.path,\n        label = _ref3.label,\n        options = _ref3.options,\n        originalValue = _ref3.originalValue,\n        sync = _ref3.sync,\n        rest = (0, _objectWithoutPropertiesLoose2.default)(_ref3, [\"value\", \"path\", \"label\", \"options\", \"originalValue\", \"sync\"]);\n    var parent = options.parent;\n\n    var resolve = function resolve(value) {\n      return _Reference.default.isRef(value) ? value.getValue(parent, options.context) : value;\n    };\n\n    var createError = createErrorFactory({\n      message: message,\n      path: path,\n      value: value,\n      originalValue: originalValue,\n      params: params,\n      label: label,\n      resolve: resolve,\n      name: name\n    });\n    var ctx = (0, _extends2.default)({\n      path: path,\n      parent: parent,\n      type: name,\n      createError: createError,\n      resolve: resolve,\n      options: options\n    }, rest);\n    return runTest(test, ctx, value, sync).then(function (validOrError) {\n      if (_ValidationError.default.isError(validOrError)) throw validOrError;else if (!validOrError) throw createError();\n    });\n  }\n\n  validate.TEST_NAME = name;\n  validate.TEST_FN = test;\n  validate.TEST = options;\n  return validate;\n}\n\nmodule.exports.createErrorFactory = createErrorFactory;\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}